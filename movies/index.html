<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Movie App</title>
    <script src="script.js" defer></script>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body>

    <nav>
        <form>
            <input type="textarea" placeholder="Search">
        </form>
    </nav>
    <main>
        <div class="container">
            
        </div>
    </main>


<script>
    // img url format: `https://image.tmdb.org/t/p/w200/{imgSource}`
    const API_KEY =  ''
    
    const img = document.body.querySelector('img')
    const container = document.body.querySelector('.container')
    const form = document.body.querySelector('form')
    const searchBox = document.body.querySelector('form input')


    form.addEventListener('submit', (e)=>{
        e.preventDefault()
        findMovies(searchBox.value)

    })
    
    async function findMovies(userSearch){

        const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${String(searchBox.value)}`)
        const movies = await response.json()

        searchBox.value = ''
        container.innerText = ''
        
        // console.log(movies)

        movies.results.forEach(movie => {
            if(movie.overview == '' || movie.poster_path == null){      //do not display movies with no backdrop or description
                return
                }
            else{
                container.innerHTML += 
                    `<div class='card'>
                    <img src= https://image.tmdb.org/t/p/w300${movie.poster_path}>
                    <div class="movie-info">
                        <h2 class="title">${movie.title}</h2>
                        <p class="rating">${movie.vote_average}</p>
                    </div>
                    <div class="overview">
                        <p>${movie.overview}</p>
                    </div>
                <div>` 
            }
                          
        });      

        const cards = document.body.querySelectorAll('.card')       //selects all movies that are displayed
        cards.forEach(card => {                                     //adds the overview animation
            card.addEventListener('mouseenter',(e)=>
            {
                e.target.children[2].classList.add('active')        //selects 3rd child of of the card element, which is the 'overview' div

            })
            card.addEventListener('mouseleave',(e)=>{
                e.target.children[2].classList.remove('active')

            })
        })
    }

    findMovies()

</script>  

</body>
</html>